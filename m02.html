<!DOCTYPE HTML>
<!--
	Linear by TEMPLATED
    templated.co @templatedco
    Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Milestone02</title>
        <link href="shrimp.ico" rel="icon">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link href='http://fonts.googleapis.com/css?family=Roboto:100' rel='stylesheet' type='text/css'>
        <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-panels.min.js"></script>
		<script src="js/init.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel-noscript.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-desktop.css" />
		</noscript>
        <style>
            img.code {
                border: 2px solid #34b597;
            }
        </style>
	</head>
	<body>

	<!-- Header -->
		<div id="header">
			<div id="nav-wrapper"> 
				<!-- Nav -->
				<nav id="nav">
					<ul>
                        <li><a href="index.html">Homepage</a></li>
						<li><a href="about.html">About</a></li>
						<li><a href="team-contract.html">Team Contract</a></li>
						<li><a href="meeting-minutes.html">Meeting Minutes</a></li>
					</ul>
				</nav>
			</div>
			<div class="container"> 
				
				<!-- Logo -->
				<div id="logo" style="font-family: Ubuntu; font-weight: normal">
					<h1><a href="index.html">team-shrimp-cracker</a></h1>
					<span class="tag">A robotics team dedicated to jamming the most flavor in a little robot.</span>
				</div>
			</div>
		</div>
	<!-- Header --> 

	<!-- Main -->
		<div id="main">
			<div class="container">
				<div class="row">

					<!-- Sidebar -->
					<div id="sidebar" style="width: 20%;" class="4u">
						<section>
							<header>
								<h2>LABWORK</h2>
							</header>
							<div class="row">
								<section class="6u">
									<ul class="default">
                                        <li><a href="lab01.html">Lab01</a></li>
										<li><a href="lab02.html">Lab02</a></li>
										<li><a href="lab03.html">Lab03</a></li>
                                        <li><a href="lab04.html">Lab04</a></li>
										<li><a href="m01.html">Milestone01</a></li>
										<li><a href="m02.html">Milestone02</a></li>
										<li><a href="nobody-home.html">Milestone03</a></li>
                                        <li><a href="nobody-home.html">Milestone04</a></li>
									</ul>
								</section>
							</div>
						</section>
			</div>
					
					<!-- Content -->
					<div id="content" class="8u skel-cell-important" style="width:75%;">
						<section>
							<header style="margin-bottom:5%; ">
								<h2>MILESTONE02</h2>
							</header>
                            <h2 style="font-size:200%; margin-bottom: 2%;">Objective</h2>
							<p>The purpose of this milestone was to add spice to the life of our robot with wall detection and differentiation between the three treasures.</p>
                        
                            <h2 style="font-size:200%; margin-bottom: 2%;">Wall Detection</h2>
                            <p>We need short range IR sensor SHARP 0A41SK to detect the distance between the sensor and the object.</p>
                            <p>Code to measure the distance between the wall and the robot:</p>
                            <img src="images/m02_c1.PNG" class="code" height=350>
                            <p>The IR sensor performance can be analyzed from the video:</p>
                            <a href="https://youtu.be/L2GjUC7tSxU">
                                <img src="https://i.imgur.com/ovFlDHc.png" alt="wall detection" width=600>
                            </a>
                            <p>To detect the wall, we can change the code to the following:</p>
                            <img src="images/m02_c2.PNG" class="code" height=350>
                            <p>Therefore, when the distance between the sensor on the robot and the wall falls into 13 to 15 cm range, the robot will turn left or right to avoid the wall and the distance measurments will delay longer to finish the turning.</p>
                            
                            <h2 style="font-size:200%; margin-bottom: 2%;">Treasure Detection</h2>    
                            <p>In order to differentiate between the three frequencies of treasures, we needed to modify our FFT code from Lab 2 for optical detection. As a unit test, we first checked to see which bins corresponded to the different treasure frequencies.</p>
                            <img src="images/lab02_graph.png" width=600>
                            <p>Since our analog circuitry was still in progress, we had to rely on just our software to differentiate between the frequencies for this milestone. We were then faced with the problem of how to make our software sensitive enough to detect the treasure farther away, but also able to differentiate between the three frequencies of treasure. This resulted from harmonics in the FFT - when a treasure of one frequency triggered the sensor, there would also be a spike in the relevant bins of other frequencies.</p>
                            <p>We solved this problem by comparing the relevant bins and determining which frequency had the highest magnitude. If the maximum magnitude was greater than the threshold, we reported that the treasure was detected.</p>
                            <p>Here is our code for determining which frequency treasure the sensor detected:</p>
                            <img src="images/m02_c3.PNG" class="code" width=500>
                            <p>This video shows detection of a single treasure, moving it in and out of range of our sensor: </p>
                            <a href="https://drive.google.com/file/d/0BwOxbk7b-QdoUFhZLXRjNUlVYlU/view">
                                <img src="https://i.imgur.com/a8mRE3X.png" alt="Single treasure detection" width=600>
                            </a>
                            <p>We found, however, that using this method sometimes resulted in false detection of treasure. Our software was extremely sensitive and could not filter out noise. The program also misidentified some of the frequencies. To solve both of these problems, we decided to add time integration.</p>
                            <p>We checked to see whether treasure of the same frequency had been detected for several iterations. Only when our robot had detected the treasure for more iterations than our cycle threshold did it report a treasure being detected. We found that adding the cycle threshold enabled our robot to filter out noise as well as correctly identify the frequency of treasure each time.</p>
                            <p>Here is our code for time integration (Note: We did not reset the counters if the treasure of a particular frequency was not detected that iteration. We chose not to do this to keep the number of instructions low. We thought this was an acceptable trade off as our code worked correctly even without this reset):</p>
                            <img src="images/m02_c4.PNG" class="code" height=250>
                            <p>The following video shows our code recognizing the correct treasure frequencies. </p>
                            <a href="https://drive.google.com/file/d/0BwOxbk7b-QdoeDhjaDNwNkFNQVU/view">
                                <img src="https://i.imgur.com/9MbMQJD.png" alt="Single treasure detection" width=600>
                            </a>
                            
                            <h2 style="font-size:200%; margin-bottom: 2%; margin-top:2%;">Looking Ahead</h2>   
                            <p>For our final robot, we plan to modify our treasure detection based on our final analog circuitry. We plan to add an op-amp as well as band pass filtering in order to amplify the output of the sensor and filter out noise. As a result, we will not have to make our software as sensitive, and we will be able to make it much more efficient.</p>
                           
						</section>
					</div>

				</div>
			</div>
		</div>
	<!-- /Main -->

	<!-- Tweet -->
		<div id="tweet">
			<div class="container">
				<section>
					<blockquote style="font-family:Ubuntu; letter-spacing: 2px;">no bad robots</blockquote>
				</section>
			</div>
		</div>
	<!-- /Tweet -->

	<!-- Footer -->
		<div id="footer">
			<div class="container">
				<section>
					<header>
						<h2></h2>
                        <span class="byline">Check out the <a href="https://cei-lab.github.io/ece3400/">ECE3400 website</a>!</span>
					</header>
				</section>
			</div>
		</div>

	<!-- Copyright -->
		<div id="copyright">
			<div class="container">
				website design from <a href="http://templated.co">TEMPLATED</a>  
			</div>
		</div>


	</body>
</html>